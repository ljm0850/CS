# 컴퓨터 보안

- 컴퓨터는 어떻게 데이터를 안전하게 지키는가?



## 보안과 프라이버시 개요

### 위협 모델(Threat model)

- 보안이 필요한 대상 목록과 각 보안 대상에 가해질 수 있는 공격을 열거, 공격을 방어하는 방법을 설계하는데 도움을 줌
  - ex) 블루투스가 탑재된 기타 앰프는 블루투스 페어링 프로토콜이 있어야 연결을 보호 가능, 미구현시 누구든지 접근 가능하기에 문제 발생
- 위협 모델에 따라 적절한 방어를 설계
  - 책가방을 보호하기 위해 경호원을 데리고 다니는 것은 비효율적
  - 사물함 정도가 적절한 방어
- 패스워드 조합 방법과 패스워드 변경 기간을 강제할 경우 사람들은 쉽게 추측 할 수 있는 패스워드를 사용하거나, 종이에 적어두게 됨

### 신뢰

- 위협 모델 정할 때 가장 신경쓸 부분으로 신뢰할 대상을 정하는 것
- 컴퓨터 보안에서 신뢰는 고객이 선택할 수는 없지만 의존해야 하는 대상을 가리키는 말

#### 신뢰위반

- **의도적** : 사용자가 실수로 설치한 프로그램이 아니라 제공자(컴퓨터 제조사 등)가 설치한 프로그램 ex)Lenovo가 랩톱에 설치한 광고 멀웨어
- **무능** : 암호화 하지 않았거나 패스워드를 하드코딩하여 사용 하는 등 '잘못될 게 뭐 있겠어?'라는 위협 모델이 '모호성에 의한 보안'이라는 사고 방식과 어우러진 것
- **부정직** : 새빨간 거짓말, ex) 미국 국립 표준 기술 연구소(NIST)에서 미국 국가보안국(NSA)에서 온 전문가의 도움을 받아 만든 암호 표준이 의도적으로 표준을 강화하지 않고 약화시켜 더 쉽게 스파이 활동이 가능하게 만듬 => 이런 유형의 위반으로 공격자가 비밀리에 안전하게 정보를 빼내는 경우를 표현하는 **클렙토그래피**라는 단어가 생김

### 모던 타임즈

- 벨튀
  - 누군가 지속적으로 초인종을 눌러 다른 사람이 초인종을 누르지 못하는 경우가 발생 => 서비스 거부(DOS,denial of service) 공격
  - 분산 서비스 거부 공격(DDOS) => 많은 사람이 협력해서 벨튀를 하는 상황
- **프록시(proxy)**
  - 공격자 추적을 아주 어렵게 하는 요인 중 하나
    - 공격자들이 자신의 컴퓨터에서 공격을 시도한다면 쉽게 추적할 수 있는 흔적이 남음
    - 공격자들이 몇몇 기계에 침입해서 자신의 소프트웨어(멀웨어)를 설치하고, 이 다른 기계들이 공격을 하게 만듬
    - 이렇게 만들어진 트리구조에서 이를 지시하는 기계의 명령 및 제어 메세지를 잡아내기는 어려움

## 크립토그래피

- 송신자가 통신 내용을 정해진 수신자만 디코딩하도록 송신 가능
- 암호 서명 사용시 데이터의 진실성을 증명할 수 있음

### 스테가노그래피

- 어떤 내용을 다른 내용 속에 감추는 방식
- 기술적으로는 크립토그래피가 아니지만, 목적은 매우 비슷
- 웹페이지에서 광고 차단을 감지하기 위해 숨겨둔 광고가 차단되는 것을 이용하여 탐지 가능
- 영상 원본 탐지 ex) 삼성 행사에서 기자들에게 미리 영상을 뿌리는 데, 이 때 워터마크처럼 각자 다른 정보를 가지고 있음

### 치환 암호

- 각 문자를 다른 문자로 변환하는 표를 이용하여 암호화 하는 방식
- 대칭 코드 : 암호화와 복호화에 같은 암호를 사용하는 경우
  - 치환 암호는 통계를 사용해 쉽게 분석이 가능하기에 좋은 방법은 아님(알파벳에서 e,t,a,o,n이 가장 자주 쓰임)

### 전치 암호

- 문자 위치를 뒤섞어서 만드는 암호 (스키테일이라고도 함)

### 일회용 패드

- 아주 안전한 암호화 방식

- 중복되지 않는 유일한 치환 암호들의 모음으로, 각 치환 암호 코드를 단 한번만 사용
- 암호가 종이 패드에 인쇄 및 사용 후 바로 찢어버려서 붙은 이름
- 문제
  - 양 당사자가 똑같은 패드를 사용해야함
  - 양 당사자가 서로 동기화돼야 함
  - 패턴 반복을 피하려면 패드가 메세지만큼 길어야 함

### 키 교환 문제

- 대칭 암호 시스템에는 통신의 양 당사자가 같은 열쇠(키)를 사용해야 하는 문제가 있음
- 중간에 키를 복사본을 만든 경우 알 수 없고, 망가지거나 손상된 경우 쓸모가 없어짐
- 즉 중간자 공격에 취약

### 공개키 암호

- 서로 연관된 키 쌍을 사용
- 대칭키 암호에서는 누구에게나 알려져 있는 키를 **공개키**라고 부르고, 본인만 알고 있어야 하는 키를 **비밀키**라고 부름
- 공개키로 암호화한 암호문은 비밀키로만 복호화 가능
- 암호화와 복호화에 사용되는 키가 다르기 때문에 **비대칭** 시스템
- **트랩도어 함수** : 한 방향으로는 계산하기 쉽지만, 비밀 정보를 알지 못하면 반대쪽 방향으로는 계산이 어려운 함
- 비대칭 암호화는 계산비용이 많이 듬, 그렇기에 실제로 암호화할 때 사용할 대칭 **세션 키**를 만들어 비대칭 암호화를 사용하는 경우도 자주 있음

### 전방향 안정성

- 대칭 암호 세션 키를 실제 통신에 사용시, 키를 발견하면 모든 메세지를 읽을 수 있는 문제가 있음
- 그렇기에 각 메세지마다 세션 키를 새로 만드는 방식

### 디지털 서명

- 크립토그래피를 사용하면 디지털 서명을 통해 데이터가 진본임을 겅증할 수 있음
  - 디지털 서명은 정합성, 부인방지 & 인증을 제공
- **정합성**(integrity) 검증 : 메세지가 변조됐는지 검증
  - 데이터의 암호학적 해시값을 계산해 데이터 뒤에 추가함으로써 이루어짐
  - 누구나 메시지 뒤에 해시를 붙일 수 있기에 송신자는 해시를 자신의 **비밀키**로 암호화 해서 붙임
  - 수신자는 **공개키**를 통해 해시를 복호화
- **부인방지**(nonrepudiation) : 메세지를 보낸 사람이 자기가 그런 메세지를 보낸 적이 없다고 주장 할 수 없음
  - 비밀키를 사용하기 때문에 가능
  - 수신자는 공개키와 서명한 사람의 비밀키가 서로 연결되어 있음을 알고 있기 때문에 메시지에 서명한 사람을 확신 가능하고, 변조 여부는 해시값으로 확인
  - 따라서 수신자가 받은 메시지가 원본과 같은 메시지라는 사실을 확인 가능 (**인증**)

### 공개키 인프라

- 은행 접속 예시
  - 은행은 자신의 공개키를 브루어제에게 전송하고, 브라우저는 은행만 복호화 가능하게 은행 공개키를 사용해 데이터를 암호화 함
  - 이 때 은행에서 온 공개키가 정말 은행에서 왔는지 확신이 힘듬
- 이를 해결하기 위해 좋은 방법은 아니지만 **공개키 인프라스트럭처**를 이용
  - 신뢰할 수 있는 제3자인 **인증기관**이 해당 키가 당사자(해당 은행)의 키인것을 인증해줌
  - 인증기관이 해킹될 수 있는 문제, 인증기관에서 비밀키를 흘리는 문제, 인증서를 요청하는 기관을 제대로 검증하지 않아 발생하는 문제가 발생 가능

### 블록체인

- 크립토그래피를 응용한 분야

- 블록 n의 구성
  - 블록 n-1 해시
  - 블록 생성 타임스탬프
  - 블록 데이터

- 블록 n의 내용을 변경하면 그 블록의 해시값이 변경됨 => n+1 블록에 저장된 해시와 일치하지 않게됨

## 기타

- 사이드 채널 공격 : 프로그램 구현의 메타데이터나 부작용에 기반을 둔 공격 방법
  - 암호를 검사하는 코드가 있을 때 틀린 암호를 검사하는 것 보다, 올바른 암호에 가까운 암호를 검사시 시간이 더 걸린다면, 공격자에게 힌트를 주는 것과 같음 (**타이밍 공격**)
  - ATM기에서 키패드를 향하고 있는 카메라
  - 반 에크 프리킹
    - 안테나를 사용해 모니터 방사파를 잡아내서 모니터에 표시된 이미지를 원격에서 재현가능
    - 이를 이용하여 전자 투표 시스템을 공격해서 비밀 투표를 무력화 할 수 있음을 시연

- 동적 메모리 할당시 주의점
  - C 언어 표준 라이브러리의 malloc, realloc, free 함수를 이용하여 할당한 메모리를 해제 후,다른 프로그렘에게 해당 메모리를 할당할 경우 메모리 해제 전에 기록된 정보를 다른 프로그램에서 읽을 수 있음, 따라서 메모리를 해제하기 전에 민감한 정보를 지워야함
- 가비지컬렉션 주의점
  -  `sensitive\n`이라는 민감 정보(char)가 있다 가정
  -  이 문자열을 다 쓰고 나면 어떻게 지우는가?
    - C 문자열은 NUL로 끝나므로 `\nensitive\n`으로 변경하여 빈 문자열로 바꿀 수가 있음
    - 그렇기에 전체 문자를 덮어써야함
  - Java, JavaScript 등 언어는 가비지 컬렉션을 사용하여 처리함
    - 민감한 정보를 덮어쓰는 대신 새로운 문자열을 할당한 다음, 민감한 정보가 담긴 문자열은 가비지 컬렉션이 가능한 문자열로 분류됨
    - 민감한 정보는 지워지지 않고, 강제로 지울 방법도 없음